(function(e){var i=(("ontouchstart" in window)||(window.DocumentTouch&&document instanceof DocumentTouch))?"touchstart.serialexpand":"click.serialexpand";var j="mouseenter.serialexpand";var f="mouseleave.serialexpand";var c=e(window);var d=e("html");var b=false;var h;var g;var a;e.fn.serialexpand=function(k){var l=e.extend({},e.fn.serialexpand.defaults,k);var m=this;e.extend(this,{onload:function(){g=e('<div id="serialexpand" />').appendTo("body");b=true},init:function(){if(b==false){this.onload()}this.each(function(){var o=e(this);var n=l.getTarget(o);n.appendTo(g).data("serialexpand-trigger",o);if(l.event=="click"){o.off(i).on(i,function(){var p=m.getAction(o);m[p?"open":"close"](n);return false})}else{if(l.event=="hover"){o.off(j).on(j,function(){clearTimeout(a);m.open(n)});n.off(j).on(j,function(){clearTimeout(a)});o.add(n).off(f).on(f,function(){a=setTimeout(function(){m.close(n)},l.delay)})}}});e("."+l.closeClass).off(i).on(i,function(){m.close()});if(l.event=="click"){d.off(i).on(i,function(n){if(h&&n.target.id!="serialexpand"&&!g.find(n.target).length){m.close()}})}d.css("min-height","100%")},getAction:function(n){return !n.hasClass(l.currentClass)},getPosition:function(o,p){var n=o.data("serialexpand-position")||l.position;return{placement:n.split(" ")[0],alignment:n.split(" ")[1]||"center"}},getOffset:function(n){var o=n.getBoundingClientRect();var p={top:o.top,right:o.right,bottom:o.bottom,left:o.left};p.width=p.right-p.left;p.height=p.bottom-p.top;return p},setCurrent:function(n,o){n[o?"addClass":"removeClass"](l.currentClass)},setPosition:function(o,n,q){var p={top:"auto",right:"auto",bottom:"auto",left:"auto"};switch(n.placement){case"top":p.bottom=c.height()-q.top;break;case"right":p.left=q.right;break;case"bottom":p.top=q.bottom;break;case"left":p.right=c.width()-q.left;break}switch(n.alignment){case"top":p.bottom=c.height()-q.bottom;break;case"right":p.right=c.width()-q.left-q.width;break;case"bottom":p.top=q.top;break;case"left":p.left=q.left;break;case"center":(n.placement=="top"||n.placement=="bottom")?p.left=q.left-(o.outerWidth()-q.width)/2:p.top=q.top-(o.outerHeight()-q.height)/2;break}o.css(p)},open:function(p){if(h){m.close()}if(p.is(":visible")){return}var o=p.data("serialexpand-trigger");var r=m.getOffset(o[0]);var n=m.getPosition(o,r);var q="serialexpand-placement-"+n.placement+" serialexpand-alignment-"+n.alignment;p.data("serialexpand-class",q).addClass(q);this.setPosition(p,n,r);p.stop(false,true).fadeIn();this.setCurrent(o,true);h=p},close:function(){var o=h;if(!o){return}var p=o.data("serialexpand-class");o.removeClass(p);var n=o.data("serialexpand-trigger");o.stop(false,true).fadeOut();this.setCurrent(n,false);h=false}});this.init();return this};e.fn.serialexpand.defaults={delay:300,event:"click",position:"bottom center",closeClass:"serialexpand-close",currentClass:"serialexpand-current",getTarget:function(k){var l=k.data("serialexpand");return e(l)}}})(jQuery);